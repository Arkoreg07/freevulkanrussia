function ActiveCollapse(e){var a=$.extend({container:null},e);$(a.container).each(function(){var e=$(this),a=function(e){e.find(".collapse").each(function(){"true"==$(this).attr("aria-expanded")?$(this).parent().addClass("active"):$(this).parent().removeClass("active")})};e.on("shown.bs.collapse",function(){a($(this))}),e.on("hidden.bs.collapse",function(){a($(this))})})}function animation(e,a,t){function n(s,i){""!=s&&""!=i?(e.addClass("b-anim-"+s[0]),o[e.attr("class")]=setTimeout(function(){e.removeClass("b-anim-"+s[0]),""!=s.slice(1)&&""!=i.slice(1)?n(s.slice(1),i.slice(1)):animation(e,a,t)},i[0])):animation(e,a,t)}var o=[];e.length>0&&""!=a&&""!=t&&(clearTimeout(o[e.attr("id")]),n(a,t))}function scrollAnchor(e){var a=$.extend({speed:null,btnAnchor:".js-btn-anchor",elFix:".js-fix-el"},e);$(a.btnAnchor).on("click",function(e){e.preventDefault();var t=$(a.elFix+":visible"),n=0;$(t).each(function(){n+=$(this).height()});var o=$(this).attr("data-anchor"),s=$('[data-anchor-box = "'+o+'"]'),i=s.offset();if(void 0!==i){var r=i.top-(s.height()/2+20)-n;$("html, body").animate({scrollTop:r},a.speed)}})}function countJP(e){var a=$.extend({container:null,classItem:"__item",classItemMod:"__item--",timeCount:.2,sumCount:10.75,point:"point"},e);$(a.container).each(function(){var e=$(this),t=e.attr("class"),n=Number(e.attr("data-val")),o=function(){var o=(n+=a.sumCount).toFixed(2);if("true"==e.attr("data-style"))for(e.text(""),arr=o.split(""),i=0;i<arr.length;i++){"."==arr[i]&&(arr[i]="coma"),e.append('<span class="'+t+a.classItem+" "+t+a.classItemMod+arr[i]+'_n">'+arr[i]+"</span>");var s=e.children();s.each(function(){$(this);7==arr.length?s.eq(0).addClass(a.point):8==arr.length?s.eq(1).addClass(a.point):9==arr.length&&s.eq(2).addClass(a.point),10==arr.length?(s.eq(0).addClass(a.point),s.eq(3).addClass(a.point)):11==arr.length?(s.eq(1).addClass(a.point),e.children().eq(4).addClass(a.point)):12==arr.length&&(s.eq(2).addClass(a.point),s.eq(5).addClass(a.point))})}else e.text(o)};o(),setInterval(function(){o()},1e3*a.timeCount)})}function activeLabel(e){e.is(":checked")?e.parents("label").addClass("checked"):e.parents("label").removeClass("checked")}function inputCart(e){var a=$.extend({container:null,item:".js-input-cart__item"},e);$(a.container).each(function(){var e=$(this);$(a.item).keypress(function(e){var a=/[0-9\x25\x27\x24\x23]/,t=e.which,n=String.fromCharCode(t);return!(0!=t&&8!=t&&9!=t&&13!=t&&!n.match(a))}),$(a.item,e).keyup(function(e){e.keyCode||e.which;var a=Number($(this).attr("data-index"));4==$(this).val().length&&$('[data-index="'+Number(a+1)+'"]').focus(),0==$(this).val().length&&$('[data-index="'+Number(a-1)+'"]').focus()})})}function togAttrCheck(e){var a=$.extend({container:null,mainCheck:"main_checkbox",mainCheckClass:".main_checkbox",checks:"input",allChecks:".b-checkbox-group__sub input",allChecksCh:".b-checkbox-group__sub input:checked",box_check:".b-label-check"},e);$(a.container).each(function(){var e=$(this);$(a.checks,e).change(function(){$(this).hasClass(a.mainCheck)&&($(this).is(":checked")?$(a.allChecks,e).prop("checked",!0).trigger("refresh"):$(a.allChecks,e).prop("checked",!1).trigger("refresh")),$(a.allChecks,e).each(function(){var t=$(a.allChecksCh,e).length;$(a.allChecks,e).length;t>=1?$(a.mainCheckClass,e).prop("checked",!0).trigger("refresh"):$(a.mainCheckClass,e).prop("checked",!1).trigger("refresh")})})})}function headHidSow(e){var a=$.extend({elHidden:".js-head-hid",elShow:".js-head-show"},e),t=$(a.elHidden).height();$(window).scrollTop()>=t?$(a.elShow).addClass("show"):$(a.elShow).removeClass("show")}function tizerLazyLoad(e){var a=$.extend({container:null,item:"li"},e);$(a.container).each(function(){var e=$(this);$(a.item,e).each(function(){if($(this).hasClass("active")){var e=$(this).attr("data-style-background");$(this).attr("style",e)}})})}function CarouselLazyLoad(e){var a=$.extend({container:null,item:"li"},e);$(a.container).each(function(){var e=$(this);$(a.item,e).each(function(){if($(this).hasClass("active")){var e=$(this).find("img"),a=e.attr("data-img-src");e.attr("src",a)}})})}function InitBrowserType(){var e,a=navigator.userAgent,t="",n=void 0!==n?n:{ff:"https://addons.mozilla.org/ru/firefox/addon/playanyway/",chrome:"https://chrome.google.com/webstore/detail/playanyway/goappnmfglcljmidmnchoiljempejdji",ie:"http://play-any-way.net/download/ie/SetupPlayAnyWay.msi",opera:"https://addons.opera.com/ru/extensions/details/playanyway/",safari:"http://play-any-way.net/download/safari/playanyway.safariextz",ya:"https://chrome.google.com/webstore/detail/playanyway/goappnmfglcljmidmnchoiljempejdji"};if(a.search(/Safari/)>0&&(e="safari",t="Safari"),a.search(/Chrome/)>0&&(e="chrome",t="Chrome"),a.search(/YaBrowser/)>0&&(e="ya",t="Yandex"),a.search(/Firefox/)>0&&(e="ff",t="Firefox"),(a.search(/OPR/)>0||a.search(/Opera/)>0)&&(e="opera",t="Opera"),(a.search(/MSIE/)>0||a.search(/rv:11.0/)>0||a.search(/Edge/)>0)&&(e="ie",t="Internet Explorer"),!t)return!1;var o="[data-browser="+e+"]",s=$(".button").children("a"),i=$(".plugin-install"),r=$(".browsers-container").find(o);r.addClass("active").find(".button--secondary").removeClass("button--disabled").removeClass("button--secondary").addClass("button--action"),r.find(s).attr("href",n[e]),i.attr("href",n[e]).find(".browser-icons").addClass("browser-icons--"+e),$(".for").find("span").text("для "+t),$('[data-target="#b-'+e+'"]').click(),$("."+e).show(),$(".link-"+e).show(),$(".step--"+e).show(),$(".plugin_page_content").addClass("ppc-"+e)}function goToMessage(e){if(window.location.pathname==e.url){var a=Math.floor(100*Math.random());window.location.href=e.url+"?rand="+a+"#message"}else window.location.href=e.url+"#message"}function setJsStyleInput(){$(".js-select").length&&$(".js-select").styler(),$(".js-input").length&&($(".js-input").styler(),$("input:radio, input:checkbox").each(function(){var e=$(this);activeLabel($(this)),$("input:radio, input:checkbox").change(function(){activeLabel(e)})}))}function getScrollBarWidth(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var a=document.createElement("div");a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.visibility="hidden",a.style.width="200px",a.style.height="150px",a.style.overflow="hidden",a.appendChild(e),document.body.appendChild(a);var t=e.offsetWidth;a.style.overflow="scroll";var n=e.offsetWidth;return t==n&&(n=a.clientWidth),document.body.removeChild(a),t-n}function sendMailConfirmAgain(){$.post({dataType:"json",url:mailConfirmAgainUrl,success:function(e){e&&"function"==typeof window.showAlert&&window.showAlert(e.message)}})}function profileDeleteMessage(e){$.ajax({dataType:"json",method:"POST",url:profileDeleteMessageUrl,data:{id:e},success:function(a){a.result&&($("#profileMessage-"+e).remove(),"function"==typeof window.showAlert&&window.showAlert(a.message),$(document).trigger("messageDecrement"))}})}function setWelcomeBonus(){var e=0,a=$("#bonuses-container");a.is(":visible")&&(e=a.find("label.checked").find("input[name=bonus-radio]").val()),$.cookie("welcome_bonus_id",e,{expires:1,path:"/"})}function addGameToFavourites(e,a){if(!$(a).data("processing")){$(a).data("processing",!0);var t=window.getUrl("actions","setFavoriteGame");$(a).hasClass("active")&&(t=window.getUrl("actions","deleteFavoriteGame")),$.ajax({dataType:"json",method:"POST",url:t,data:{id:e},success:function(e){1==e.result&&($(a).toggleClass("active"),$(a).data("processing",!1))}})}}function notify(e,a){if($(a).toggleClass("n-shown"),!e){var t=$(".notify")[0];t.currentTime=0,t.volume=.2,t.play()}}function format(e){return parseFloat(e).toFixed(2).replace(".",",").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$& ").replace(/\,?0+$/,"")}function winnersCarousel(e){var a=$(".nowWinners-inner"),t=$(".b-list-win"),n=a.parent().height();if(a.hasClass("nw-animate"))return!1;if(jQuery.isEmptyObject(e)){var o=0;switch(n){case 155:case 254:o=-2;break;case 248:o=-1}o&&t.slice(o).remove(),setTimeout(function(){a.fadeIn()},500)}else{var s="";s+='<div class="b-list-win">',s+='<a href="'+e.gameUrl+'" class="b-list-win__item g-clearfix">',s+='<span class="b-list-win__box-img"><img class="b-list-win__img" src="'+e.imgUrl+'"></span>',s+='<span class="b-list-win__name">'+e.userName+"</span>",s+='<span class="b-list-win__sum">'+format(e.sum)+" руб.</span>",s+='<span class="b-list-win__game">в <u>'+e.gameName+"</u></span>",s+="</a>",s+="</div>",a.prepend(s);var i=a.children().length,r=3;switch(n){case 205:case 254:r=3;break;case 269:r=4;break;case 334:r=5}i>r&&(a.addClass("nw-animate"),setTimeout(function(){a.removeClass("nw-animate"),t.last().remove()},1500))}}function signUpTransform(){var e=$("#signup-form"),a=$(".b-modal-registration .g-fl-l"),t=$(".b-modal-registration .g-fl-r"),n=$(".registration-social"),o=$(".registration-agreement"),s=$(".bonuses-container-wrapper"),i=$(".field-signupform-email, .field-signupform-password");window.innerHeight<=890?(a.prepend(n).append(o),t.append(s),i.addClass("min-form")):(t.prepend(n).append(o),e.append(s),i.removeClass("min-form"))}function checkLocationHash(){var e=document.location.hash,a=$("body").hasClass("user-guest"),t=["modalProfile","modalMessages","modalBonuses","modalLotteries","modalSettings"],n=["modalCash","modalCashOut","modalPayhistory"],o=["modalLogin","modalRegister","modalRecovery","modalNewPassword"];if(!1!==e.indexOf("#")){var s,i=e.replace("#",""),r="modal"+(i=i.charAt(0).toUpperCase()+i.slice(1)),l="#modal"+i,c=-1!==$.inArray(r,t),d=-1!==$.inArray(r,n),u=-1!==$.inArray(r,o);void 0!==modalUrls[r]&&(s=modalUrls[r],c&&(l="#modalProfile"),d&&(l="#modalCash"),c&&a||u&&!a?(window.location.replace("#"),"function"==typeof window.history.replaceState&&history.replaceState({},"",window.location.href.slice(0,-1))):($(l).modal({remote:s+document.location.search}),$(l).modal("show")))}}function setTournamentGamesStyles(){if("function"==typeof window.getUrl)return $.get(window.getUrl("actions","tournaments"),function(e){if(!e.length)return!1;e.forEach(function(e){e.games.forEach(function(e){$(document).find(".js-slot[data-id="+e.id+"]").addClass("slot--tournament")})})}),!1}$(document).ready(function(){animation($(".b-jp__img"),[0,1,2,2,1,1,2,3,3,2,1,0],[3e3,50,50,50,15,10,10,10,50,50]),setJsStyleInput(),inputCart({container:".js-input-cart"}),togAttrCheck({container:".b-checkbox-group"}),ActiveCollapse({container:"#group-question"}),$("img.svg").each(function(){var e=$(this),a=e.attr("id"),t=e.attr("class"),n=e.attr("src");$.get(n,function(n){var o=$(n).find("svg");void 0!==a&&(o=o.attr("id",a)),void 0!==t&&(o=o.attr("class",t+" replaced-svg")),o=o.removeAttr("xmlns:a"),e.replaceWith(o)})}),InitBrowserType(),checkLocationHash(),$("body").hasClass("modal-open")&&!$("body").hasClass("modal-open-noscroll")&&$("body").addClass("modal-open-noscroll"),$(document).on("show.bs.modal",".b-modal, .modal",function(){$("body").addClass("modal-open-noscroll"),$(document).height()>$(window).height()&&($("body").css("padding-right",getScrollBarWidth()),$(".js-static-panel").css("margin-left",-1*getScrollBarWidth()/2-520))}),$(document).on("hide.bs.modal",".b-modal, .modal",function(){var e=$(this)[0],a=[];$(".b-modal, .modal").each(function(){$(this).is(":visible")&&a.push($(this)[0])}),a.length>1&&-1!==a.indexOf(e)||($("body").removeClass("modal-open-noscroll"),$(".js-static-panel").css("margin-left",""),window.location.href.indexOf("#")>0&&history.pushState("",document.title,window.location.pathname))}),$(".js-close-top-banner").on("click",function(e){e.preventDefault();var a=new Date;$(".js-top-banner-panel").fadeOut(),a.setTime(a.getTime()+36e5),$.cookie("closeTopBanner","0",{expires:a,path:"/"})}),$.cookie("closeTopBanner")||$(".js-top-banner-panel").show();var e,a=!1;if($(function(){$(".b-iframe").on({mouseenter:function(){$(".b-fading-overlay").addClass("display-overlay"),$(".b-page-game").addClass("display-overlay"),e=setTimeout(function(){a=!0},7e3)},mouseleave:function(){$(".b-fading-overlay").removeClass("display-overlay"),$(".b-page-game").removeClass("display-overlay"),clearTimeout(e),a=!1}})}),"undefined"!=typeof sec&&(startTimer(sec,$(".autoreturn span"),"autoreturn",["секунду","секунды","секунд"]),window.paymentInNewWindow)){$("#back_to_game, #autoreturn").click(function(e){e.preventDefault(),window.close()});var t=setInterval(function(){--sec<0&&(clearInterval(t),window.close())},1e3)}$(".help-widget").on("click",function(){return $("#sh_button").click(),!1}),$(".n-icon--close").on("click",function(e){e.stopPropagation();var a=$(this).parent();a.addClass("n-closed"),setTimeout(function(){a.remove()},300)}),$(".b-sb-tabs__nav-item").on("click",function(){var e=$(this).index();return $(this).addClass("active").siblings().removeClass("active"),$(this).parents(".b-sb-tabs").find(".b-sb-tabs__content-item").eq(e).addClass("active").siblings().removeClass("active"),!1}),$(".jackpot-holder-value")&&($(".jackpot-holder-value").text($(".b-jp__count").text()),$(".jackpot-holder-value").removeClass("hidden"));var n=$(".wf-glow");n.length&&setInterval(function(){n.fadeOut(500,function(){n.fadeIn(500)})},1e3),$(".nowWinners-inner").length&&winnersCarousel(),signUpTransform(),$(".loyalty-item").on("click",function(){$(this).hasClass("toggled")?$(this).removeClass("toggled"):($(".loyalty-item").removeClass("toggled"),$(this).addClass("toggled"))}),$(".loyalty-rules").on("click",function(e){e.stopPropagation()}),$(".js-fame-video").on("click",function(){var e=$(this).attr("data-videourl");$("#modalVideo").on("show.bs.modal",function(){$("#modalVideo iframe").attr("src",e)})}),$(document).on("change","#lt-show-more-ticks-p",function(){$(".lt-show-more-ticks-p").text("Показать больше билетов"==$(".lt-show-more-ticks-p").text()?"Скрыть остальные билеты":"Показать больше билетов")}),$(document).on("click",".js-check-modal-link",function(e){checkStaticLinkHash(e,$(this),openModalByStaticLink)}),setTournamentGamesStyles(),$(".js-carousel").jcarousel({wrap:"circular",animation:{duration:400,easing:"swing"}}).jcarouselAutoscroll({interval:4e3,autostart:!0}),$(".js-carousel-pagination").on("jcarouselpagination:active","a",function(){$(this).addClass("active")}).on("jcarouselpagination:inactive","a",function(){$(this).removeClass("active")}).on("click",function(e){e.preventDefault()}).jcarouselPagination({item:function(e){return'<a href="#'+e+'"></a>'}}),$(".js-carousel li:first-child").addClass("active"),$(".js-carousel").on("jcarousel:fullyvisiblein","li",function(e,a){$(this).parent().find("li").removeClass("active"),$(this).addClass("active")}),$(".js-carousel__prev").jcarouselControl({target:"-=1"}),$(".js-carousel__next").jcarouselControl({target:"+=1"}),$(".b-foot-carousel").jcarouselAutoscroll("stop")}),$(document).on("click",".js-showdesc",function(e){$(this).parents(".bonus-item").next().toggleClass("isshown");var a=$(this).text();$(this).text("Правила и условия"==a?"Свернуть":"Правила и условия")}),scrollAnchor({speed:400}),countJP({container:".jp-count-img, .jp-count",timeCount:3,sumCount:17.42}),window.setLowCash=function(){"undefined"==typeof faded&&(faded=!1),$(".js-lowcash-trigger").addClass("cash-is-low"),faded&&($(".js-lowcash-trigger").addClass("js-fadein"),setTimeout(function(){$(".js-lowcash-trigger").addClass("cash-is-low-triggered")},300))},window.updateProfileWidget=function(e){var a=$("#user-profile-widget");if(a.length){var t=e.progress+"%";a.find(".b-progress__progress-bar").width(t),a.find(".g-text-progress").text(t);var n=a.find(".b-level"),o=n.attr("class").split(" ")[1],s="b-"+e.slug;o!=s&&(n.removeClass(o).addClass(s),a.find(".g-status-title").text(e.title));var i=a.find(".x2");e.x2&&!i.hasClass("x2--active")?i.addClass("x2--active"):!e.x2&&i.hasClass("x2--active")&&i.removeClass("x2--active")}},window.updateJackpotSum=function(e){if("function"==typeof window.getPreparedSum&&$(".js-jackpot-holder").length){var a=window.getPreparedSum(e);$(".js-jackpot-holder").text(a)}},window.addWinToWinnersCarousel=function(e){var a=window.getUrl("urls","gameUrl"),t=window.getUrl("urls","thumbnailsUrl").replace("{image}",e.game_image),n={gameUrl:a+"/"+e.game_slug,imgUrl:t,userName:e.user_name_formatted,sum:e.sum,gameName:e.game_name};window.winnersCarousel(n)},window.showHappySpinPopup=function(e){var a=window.getUrl("actions","happyWheelBase");a&&$("#modalHappySpin").attr("data-wheel-id",e).modal({remote:a+"?id="+e})},$(document).on("click","#profile-password-form .button",function(){$(".password-informer").removeClass("is-active")}),$(document).on("focus","#profilepasswordform-password",function(){$(".password-informer").addClass("is-active")});