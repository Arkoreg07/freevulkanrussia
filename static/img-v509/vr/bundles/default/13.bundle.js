(window.webpackJsonpCMS=window.webpackJsonpCMS||[]).push([[13,26,27],{343:function(t,n,e){"use strict";e.r(n);var r=e(617),s=e(439);for(var o in s)"default"!==o&&function(t){e.d(n,t,function(){return s[t]})}(o);e(591);var i=e(0),a=Object(i.a)(s.default,r.a,r.b,!1,null,null,null);n.default=a.exports},344:function(t,n,e){"use strict";e.r(n);var r=e(618),s=e(442);for(var o in s)"default"!==o&&function(t){e.d(n,t,function(){return s[t]})}(o);e(592);var i=e(0),a=Object(i.a)(s.default,r.a,r.b,!1,null,null,null);n.default=a.exports},360:function(t,n,e){"use strict";e.r(n);var r=e(701),s=e(593);for(var o in s)"default"!==o&&function(t){e.d(n,t,function(){return s[t]})}(o);var i=e(0),a=Object(i.a)(s.default,r.a,r.b,!1,null,null,null);n.default=a.exports},362:function(n,t){function e(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=e=function(t){return typeof t}:n.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}n.exports=e},363:function(t,n,e){"use strict";var r=e(364);t.exports={props:{dataParams:{type:String,required:!0}},computed:{componentParams:function(){return r.componentParams(this.dataParams).success}}}},364:function(t,n,e){"use strict";var r=e(1);e(18),e(39);var s=r(e(362));n.componentParams=function(t){var n={success:null,error:null};if("string"==typeof t){var e=t.replace(/'/g,'"');try{n.success=JSON.parse(e)}catch(t){n.error={message:"Проблема при парсингу json-масива",e:t},console.log(t)}}else n.error={message:'Неочікуваний тип вхідних даних: очікую "string", передано "'.concat((0,s.default)(t),'"')};return n},n.staticParams=function(t){var n={success:null,error:null};if("string"==typeof t){var e=t.replace(/'/g,'"');try{n.success=JSON.parse(e)}catch(t){n.error={message:"Проблема при парсингу json-масива",e:t},console.log(t)}}else n.error={message:'Неочікуваний тип вхідних даних: очікую "string", передано "'.concat((0,s.default)(t),'"')};return n}},371:function(t,n,e){var r=e(3),s=e(372).values;r({target:"Object",stat:!0},{values:function(t){return s(t)}})},372:function(t,n,e){function r(a){return function(t){for(var n,e=f(t),r=u(e),s=r.length,o=0,i=[];o<s;)n=r[o++],c&&!l.call(e,n)||i.push(a?[n,e[n]]:e[n]);return i}}var c=e(16),u=e(57),f=e(28),l=e(126).f;t.exports={entries:r(!0),values:r(!1)}},439:function(t,n,e){"use strict";e.r(n);var r=e(440),s=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,function(){return r[t]})}(o);n.default=s.a},440:function(t,n,e){"use strict";t.exports={mixins:[e(448)]}},441:function(t,n,e){},442:function(t,n,e){"use strict";e.r(n);var r=e(443),s=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,function(){return r[t]})}(o);n.default=s.a},443:function(t,n,e){"use strict";t.exports={mixins:[e(448)]}},444:function(t,n,e){},448:function(a,t,c){"use strict";(function(t,n,e){var r=c(1);c(12),c(9),c(6),c(41),c(460),c(13),c(14),c(10),c(371),c(45),c(7);var s=r(c(11));function o(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?o(Object(e),!0).forEach(function(t){(0,s.default)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}a.exports={name:"UserEvents",data:function(){return{targetModals:["modalPromotions","modalBonuses","modalMessages"]}},props:{componentParams:{type:Object,required:!0}},computed:i({},t("appData",["platform","isLogged"]),{},n("userevents",["eventsList","isLoading"]),{totalEvents:function(){return Object.values(this.eventsList).reduce(function(t,n){return t+n},0)},hasAnyEvents:function(){return Object.values(this.eventsList).filter(function(t){return 0<t}).length},hasLegacy:function(){return"hasLegacy"in this.componentParams},hasUnreadMessages:function(){return!!this.hasLegacy&&("messages"in this.eventsList&&0<this.eventsList.messages)},hasClassModifier:function(){return"classModifier"in this.componentParams},count:function(){if("category"in this.componentParams&&this.componentParams.category in this.eventsList)return"total"===this.componentParams.category?this.totalEvents:this.eventsList[this.componentParams.category]},icon:function(){return"icon"in this.componentParams&&this.componentParams.icon},counterClasses:function(){var t=[];return this.hasClassModifier&&t.push("notification-counter--".concat(this.componentParams.classModifier)),t.push("notification-counter--".concat(this.platform)),t},notifierClasses:function(){var t=[];return this.hasClassModifier&&t.push("events-notification--".concat(this.componentParams.classModifier)),t.push("events-notification--".concat(this.icon?"icon":"dot")),t}}),beforeCreate:function(){window.VuexModules.userevents||(this.$store.registerModule("userevents",c(462)),window.VuexModules.userevents=!0)},beforeMount:function(){var n=this;this.isLogged&&!this.isLoading&&(this.fetchEvents(),$(document).on("show.bs.modal",function(t){n.targetModals.includes(t.target.id)&&n.fetchEvents()}),$(document).on("messageDecrement",this.fetchEvents))},watch:{hasUnreadMessages:function(){document.querySelector(".js-inbox-button").classList.toggle("anim-inbox",this.hasUnreadMessages)}},methods:i({},e("userevents",["fetchEvents"]))}}).call(this,c(2).mapGetters,c(2).mapState,c(2).mapActions)},460:function(t,n,e){"use strict";var r=e(3),s=e(461).left,o=e(127),i=e(29),a=o("reduce"),c=i("reduce",{1:0});r({target:"Array",proto:!0,forced:!a||!c},{reduce:function(t,n){return s(this,t,arguments.length,1<arguments.length?n:void 0)}})},461:function(t,n,e){function r(u){return function(t,n,e,r){f(n);var s=l(t),o=p(s),i=m(s.length),a=u?i-1:0,c=u?-1:1;if(e<2)for(;;){if(a in o){r=o[a],a+=c;break}if(a+=c,u?a<0:i<=a)throw TypeError("Reduce of empty array with no initial value")}for(;u?0<=a:a<i;a+=c)a in o&&(r=n(r,o[a],a,s));return r}}var f=e(60),l=e(30),p=e(59),m=e(24);t.exports={left:r(!1),right:r(!0)}},462:function(t,n,e){"use strict";var r=e(1),s=r(e(21));e(22);var o=r(e(23));t.exports={namespaced:!0,state:{eventsList:{},isLoading:!1},mutations:{setEventsList:function(t,n){t.eventsList=n},setLoading:function(t,n){t.isLoading=n}},actions:{fetchEvents:function(e){return(0,o.default)(s.default.mark(function t(){var n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.commit("setLoading",!0),t.next=3,$.get(window.getUrl("actions","events"));case 3:n=t.sent,e.commit("setEventsList",n),e.commit("setLoading",!1);case 6:case"end":return t.stop()}},t)}))()}}}},591:function(t,n,e){"use strict";var r=e(441);e.n(r).a},592:function(t,n,e){"use strict";var r=e(444);e.n(r).a},593:function(t,n,e){"use strict";e.r(n);var r=e(594),s=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,function(){return r[t]})}(o);n.default=s.a},594:function(t,n,e){"use strict";t.exports={mixins:[e(363)],components:{counter:e(343).default,notifier:e(344).default}}},617:function(t,n,e){"use strict";e.d(n,"a",function(){return r}),e.d(n,"b",function(){return s});var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return 0<t.count?e("div",{staticClass:"notification-counter",class:t.counterClasses},[t._v(t._s(t.count))]):t._e()},s=[]},618:function(t,n,e){"use strict";e.d(n,"a",function(){return r}),e.d(n,"b",function(){return s});var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.hasAnyEvents?e("div",{staticClass:"events-notification",class:t.notifierClasses},[t.icon?[e("svg",{staticClass:"svg-icon"},[e("use",{attrs:{"xlink:href":t.icon}})])]:t._e()],2):t._e()},s=[]},701:function(t,n,e){"use strict";e.d(n,"a",function(){return r}),e.d(n,"b",function(){return s});var r=function(){var t=this,n=t.$createElement;return(t._self._c||n)(t.componentParams.template,{ref:t.componentParams.template,tag:"component",attrs:{"component-params":t.componentParams}})},s=[]}}]);