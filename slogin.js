if(function(){if(typeof slogin=="object")for(method in slogin)if(method=="slogin"&&slogin.method)return!1;return!0}){Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1});var sloginHost=function(a){var url="slogin.biz";if(a.length>0){var b,c;for(c in a)if(c in a&&a[c].src&&0<a[c].src.indexOf("slogin.js")){b=a[c];break}typeof b!="undefined"&&(a=b.src.match(/^.*\/\/([^/]+)/),a.length&&a[1]&&a[1].indexOf(window.location.hostname.replace("www.",""))===-1&&(url=a[1].replace(/^www\./,"")))}return url}(document.getElementsByTagName("script")),slogin={slogin:!0,tpl:null,css:null,translate:function(name){var phrases={vkontakte:"ВКонтакте",odnoklassniki:"Одноклассники",mailru:"Mail.ru",facebook:"Facebook",twitter:"Twitter",google:"Google",yandex:"Яндекс",linkedin:"LinkedIn"};return phrases[name]||name},sloginDivId:"slogin",protocol:location.href.match(/^https/i)?"https":"http",sloginHost:sloginHost,providerNames:"vkontakte odnoklassniki mailru facebook twitter google yandex linkedin".split(" "),linkParams:{},generateButtons:!0,openWindow:!0,easyxdmDone:!1,nWay:!0,custom:!1,onload:!1,lastClickTime:0,get:function(id){return document.getElementById(id)},init:function(){var sloginDiv=slogin.get(slogin.sloginDivId);if(!sloginDiv)return;slogin.getLinkParameters(sloginDiv),slogin.nWay=typeof slogin.linkParams.receiver=="undefined"?1:0,slogin.nWay&&slogin.easyXDMadd();if(slogin.linkParams.size==="block"){var phrases={id:slogin.sloginDivId+"-popup"},items=[];for(p in slogin.providerNames)phrases.social_id=slogin.providerNames[p],phrases.social_name=slogin.translate(slogin.providerNames[p]),items.push(this.makeHTML(slogin.tpl.block.item,phrases));phrases.items=items.join(""),this.appendHTML(sloginDiv,this.makeHTML(slogin.tpl.block.visible)),this.appendHTML(document.getElementsByTagName("body")[0],this.makeHTML(slogin.tpl.block.popup,phrases)),this.add(sloginDiv.childNodes[0],"click",function(){slogin.get(phrases.id).style.display="block"})}else slogin.generateButtons&&slogin.createButtons();slogin.setProperties()},customInit:function(id,generateButtons){var fun=function(){slogin.generateButtons=generateButtons||!1,slogin.onload=!0,slogin.sloginDivId=id,slogin.init()};slogin.custom=!0,slogin.onload?fun():slogin.add(window,"load",fun)},setProperties:function(){var sloginDiv=this.get(this.sloginDivId),sloginDivPopup=this.get(this.sloginDivId+"-popup");this.findAllObjects(sloginDiv),sloginDivPopup&&this.findAllObjects(sloginDivPopup)},getLinkParameters:function(el){if(el.getAttribute("login-data")){var params=el.getAttribute("login-data").split(";");for(var i=0;i<params.length;i++){var arr=params[i].split("="),value=this.autoDetectProtocol(arr[1]);this.linkParams[arr[0]]=value}}},autoDetectProtocol:function(parameter){return parameter.replace(/^\/\//g,slogin.protocol+"://")},findAllObjects:function(parentObject){var nodes=parentObject.childNodes;for(var i=0;i<nodes.length;i++){var node=nodes[i];node.getAttribute&&node.getAttribute("x-login-button")&&this.initButton(node),/icon\-arrow/.test(node.className)&&(node.onmouseover=function(){node.childNodes[0].style.display="block"},node.onmouseout=function(){node.childNodes[0].style.display="none"}),/popup\-close/.test(node.className)&&(node.onclick=function(){node.parentNode.parentNode.parentNode.style.display="none"}),this.findAllObjects(node)}},initButton:function(node){var providerName=node.getAttribute("x-login-button");providerName&&-1<this.providerNames.indexOf(providerName)&&(this.add(node,"mouseover",function(el){if(/disabled|no-opacity/.test(el.className))return!1;opacity=75,el.style.filter="alpha(opacity="+opacity+") progid:DXImageTransform.Microsoft.AlphaImageLoader(src=transparent.png, sizingMethod='crop')",el.style.opacity=parseFloat(opacity)/100}),this.add(node,"mouseout",function(el){if(/disabled|no-opacity/.test(el.className))return!1;el.style.filter="",el.style.opacity=""}),this.add(node,"click",function(el,ev){if(slogin.linkParams.demo)return!1;if(/disabled/.test(el.className))return!1;var time=+(new Date);if(slogin.lastClickTime>time-1e3)return!1;slogin.lastClickTime=time;var providerName=el.getAttribute("x-login-button"),href=slogin.protocol+"://"+slogin.sloginHost+"/"+providerName+"?host="+"&redirect_uri="+slogin.linkParams.redirect_uri;typeof slogin.linkParams["receiver"]!="undefined"&&(href+="&receiver="+slogin.linkParams.receiver),typeof slogin.linkParams["required"]!="undefined"&&(href+="&required="+slogin.linkParams.required),typeof slogin.linkParams["optional"]!="undefined"&&(href+="&optional="+slogin.linkParams.optional),typeof slogin.linkParams["nocache"]!="undefined"&&(href+="&nocache="+slogin.linkParams.nocache);var url=slogin.protocol+"://"+slogin.sloginHost+"/"+providerName+"?token";if(slogin.openWindow){var m=window.open(href,"slogin","scrollbars=1,width=800,height=600,left="+(screen.width-800)/2+",top="+(screen.height-600)/2);slogin.nWay==1&&(n=window.setInterval(function(){if(m&&m.closed){socket=slogin.initSocket(url);try{socket.postMessage("ready"),window.clearInterval(n)}catch(e){window.setTimeout(function(){socket.postMessage("ready"),window.clearInterval(n)},200)}}},100))}else location.href=href}))},easyXDMadd:function(url){if(!slogin.easyxdmDone){var a=document.createElement("script");a.src=slogin.protocol+"://"+slogin.sloginHost+"/js/easyXDM.min.js",document.body.appendChild(a),slogin.easyxdmDone=!0}},initSocket:function(url){var socket=new easyXDM.Socket({remote:url,swf:slogin.isIE()?slogin.protocol+"://"+slogin.sloginHost+"/js/easyxdm.swf":"",onMessage:function(message,origin){-1<message.indexOf("http")?window.location.href=message:-1<message.indexOf("token=")&&message.substr(6)!==""&&redirectForm(message.substr(6),slogin.linkParams.redirect_uri)}});return socket},createButtons:function(){var visible=slogin.linkParams.visible?slogin.linkParams.visible.split(","):[],hidden=slogin.linkParams.hidden?slogin.linkParams.hidden.split(","):[],phrases={};!visible.length&&!hidden.length&&(visible=this.providerNames,slogin.linkParams.size="middle");var tpl=slogin.tpl[slogin.linkParams.size],items=[];for(p in visible)phrases.social_id=visible[p],phrases.social_name=slogin.translate(visible[p]),items.push(this.makeHTML(tpl.visible.item,phrases));phrases.items_visible=items.join("");if(hidden.length&&hidden[0]){var items=[];for(p in hidden)phrases.social_id=hidden[p],phrases.social_name=slogin.translate(hidden[p]),items.push(this.makeHTML(tpl.hidden.item,phrases));phrases.items_hidden=items.join(""),phrases.block_hidden=this.makeHTML(tpl.hidden.block,phrases)}this.appendHTML(this.get(this.sloginDivId),this.makeHTML(tpl.visible.block,phrases))},add:function(a,b,c){a.addEventListener?a.addEventListener(b,function(b){c(a,b)},!1):a.attachEvent?a.attachEvent("on"+b,function(b){c(a,b)}):a["on"+b]=function(b){c(a,b)}},isIE:function(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ieversion=new Number(RegExp.$1);if(ieversion<=9)return!0}return!1},appendHTML:function(parent,html){var e=document.createElement("div");e.innerHTML=html;while(e.firstChild)parent.appendChild(e.firstChild)},makeHTML:function(tpl,phrases){return tpl.replace(/\{([a-zA-Z0-9_]+)\}/g,function(find,name){return phrases[name]||""})}};slogin.add(window,"load",function(){slogin.onload=!0,slogin.custom||slogin.init();var style=document.createElement("style");style.type="text/css",style.innerHTML=slogin.css,document.getElementsByTagName("body")[0].appendChild(style);var elements=document.getElementsByClassName("slogin");for(var i=0;i<elements.length;i++){var dataId=elements[i].getAttribute("data-id");if(!dataId)continue;elements[i].setAttribute("id","slogin-"+dataId);var script=document.createElement("script");script.type="text/javascript",script.src=slogin.protocol+"://"+slogin.sloginHost+"/widget?id="+dataId+"&callback=sloginCallback",document.getElementsByTagName("body")[0].appendChild(script)}});function redirectForm(token,url){var form=document.createElement("form");form.action=decodeURIComponent(url),form.method="post",form.target="_top",form.style.display="none";var field=document.createElement("input");field.type="hidden",field.name="access_token",field.value=token,form.appendChild(field),document.body.appendChild(form),form.submit()}function sloginCallback(data){var id="slogin-"+data.widget_id,el=document.getElementById(id),attr=document.createAttribute("login-data");attr.value=data.code,el.setAttributeNode(attr),slogin.customInit(id,!0)}};